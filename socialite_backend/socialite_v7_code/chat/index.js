var _0x34dea2=_0x3d31;(function(_0x33c80a,_0x438dde){var _0x44ec70=_0x3d31,_0x57c889=_0x33c80a();while(!![]){try{var _0x196c4f=parseInt(_0x44ec70(0x13e))/0x1+-parseInt(_0x44ec70(0x1be))/0x2+-parseInt(_0x44ec70(0x1e3))/0x3+-parseInt(_0x44ec70(0x1e1))/0x4+-parseInt(_0x44ec70(0x110))/0x5+parseInt(_0x44ec70(0x215))/0x6*(parseInt(_0x44ec70(0x135))/0x7)+parseInt(_0x44ec70(0x150))/0x8*(parseInt(_0x44ec70(0x128))/0x9);if(_0x196c4f===_0x438dde)break;else _0x57c889['push'](_0x57c889['shift']());}catch(_0x3c72cb){_0x57c889['push'](_0x57c889['shift']());}}}(_0x21de,0xbd698));const express=require(_0x34dea2(0x164)),app=express();var os=require('os'),ip=require('ip');const http=require(_0x34dea2(0x18c)),https=require('https'),server=http[_0x34dea2(0x18e)](app),{Server}=require(_0x34dea2(0x15c)),io=new Server(server),mysql=require(_0x34dea2(0x202)),admin=require('firebase-admin'),crypto=require(_0x34dea2(0x127)),{RtcTokenBuilder,RtmTokenBuilder,RtcRole,RtmRole}=require(_0x34dea2(0x1bf));var apn=require(_0x34dea2(0x158));const {v4:uuidv4}=require(_0x34dea2(0x1ec));var config=require(_0x34dea2(0x15f));const STATUS_UNRECEIVED=0x1,STATUS_RECEIVED=0x2,STATUS_UNREAD=0x3,STATUS_READ=0x4,STATUS_DELETED=0x0,CURRENT_STATUS_SEND=0x1,CURRENT_STATUS_DELIVERED=0x2,CURRENT_STATUS_SEEN=0x3,CHAT_ROOM_USER_STATUS_ACTIVE=0xa,CHAT_ROOM_USER_STATUS_REMOVED=0x2,CHAT_ROOM_USER_STATUS_LEFT=0x3,CHAT_ROOM_TYPE_PRIVATE=0x1,CHAT_ROOM_TYPE_GROUP=0x2,COMMON_NO=0x0,COMMON_YES=0x1,STATUS_LIVE_CALL_ONGOING=0x1,STATUS_LIVE_CALL_COMPLETED=0x2,STORAGE_URL=config['storageUrl'];let db;var hostname=os['hostname']();console[_0x34dea2(0x1bd)](hostname);var serviceAccount;hostname==_0x34dea2(0x205)?db=mysql['createConnection']({'host':config['db'][_0x34dea2(0x18b)][_0x34dea2(0x157)],'user':config['db'][_0x34dea2(0x18b)][_0x34dea2(0x1a0)],'password':config['db'][_0x34dea2(0x18b)][_0x34dea2(0x14f)],'database':config['db'][_0x34dea2(0x18b)][_0x34dea2(0x13d)]}):db=mysql[_0x34dea2(0x15d)]({'host':config['db'][_0x34dea2(0x123)]['host'],'user':config['db'][_0x34dea2(0x123)][_0x34dea2(0x1a0)],'password':config['db'][_0x34dea2(0x123)][_0x34dea2(0x14f)],'database':config['db'][_0x34dea2(0x123)][_0x34dea2(0x13d)]});serviceAccount=require('./serviceAccountKey.json'),admin[_0x34dea2(0x1f3)]({'credential':admin[_0x34dea2(0x194)]['cert'](serviceAccount),'databaseURL':config[_0x34dea2(0x141)][_0x34dea2(0x1a1)]}),db['connect'](function(_0x34b775){var _0xd3510a=_0x34dea2;if(_0x34b775)console['log'](_0x34b775);console['log']('dbConnected');let _0x54d1fd=_0xd3510a(0x1d1);db[_0xd3510a(0x172)](_0x54d1fd,function(_0x40b756,_0x5ac5cb,_0x17aa89){var _0x1174f0=_0xd3510a;if(_0x40b756)throw _0x40b756;var _0x5303cb=_0x5ac5cb[0x0]['user_p_id'],_0x4bc25f=_0x5ac5cb[0x0]['site_url'],_0x5c13df=ip[_0x1174f0(0x10b)](),_0x415afa=_0x1174f0(0x1e5)+_0x5303cb+_0x1174f0(0x165)+_0x4bc25f+_0x1174f0(0x214)+_0x5c13df,_0x453768=_0x1174f0(0x176),_0x5ca339={'_keyStr':'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=','encode':function(_0x36cd){var _0x945d10=_0x1174f0,_0x10ac76='',_0x481f40,_0x520187,_0x184f3a,_0x290bc7,_0x140673,_0x2daa75,_0x5b79cd,_0x466fa6=0x0;_0x36cd=_0x5ca339['_utf8_encode'](_0x36cd);while(_0x466fa6<_0x36cd[_0x945d10(0x178)]){_0x481f40=_0x36cd[_0x945d10(0x1b8)](_0x466fa6++),_0x520187=_0x36cd[_0x945d10(0x1b8)](_0x466fa6++),_0x184f3a=_0x36cd[_0x945d10(0x1b8)](_0x466fa6++),_0x290bc7=_0x481f40>>0x2,_0x140673=(_0x481f40&0x3)<<0x4|_0x520187>>0x4,_0x2daa75=(_0x520187&0xf)<<0x2|_0x184f3a>>0x6,_0x5b79cd=_0x184f3a&0x3f;if(isNaN(_0x520187))_0x2daa75=_0x5b79cd=0x40;else isNaN(_0x184f3a)&&(_0x5b79cd=0x40);_0x10ac76=_0x10ac76+this[_0x945d10(0x1b0)][_0x945d10(0x1aa)](_0x290bc7)+this[_0x945d10(0x1b0)]['charAt'](_0x140673)+this[_0x945d10(0x1b0)][_0x945d10(0x1aa)](_0x2daa75)+this[_0x945d10(0x1b0)][_0x945d10(0x1aa)](_0x5b79cd);}return _0x10ac76;},'decode':function(_0x17a600){var _0x26d930=_0x1174f0,_0x366fd6='',_0x198a09,_0x4cde00,_0x5038aa,_0x16444a,_0x1c8314,_0x3fff26,_0x501847,_0x4a4bd2=0x0;_0x17a600=_0x17a600[_0x26d930(0x152)](/[^A-Za-z0-9+/=]/g,'');while(_0x4a4bd2<_0x17a600[_0x26d930(0x178)]){_0x16444a=this[_0x26d930(0x1b0)][_0x26d930(0x201)](_0x17a600[_0x26d930(0x1aa)](_0x4a4bd2++)),_0x1c8314=this[_0x26d930(0x1b0)][_0x26d930(0x201)](_0x17a600[_0x26d930(0x1aa)](_0x4a4bd2++)),_0x3fff26=this[_0x26d930(0x1b0)]['indexOf'](_0x17a600[_0x26d930(0x1aa)](_0x4a4bd2++)),_0x501847=this[_0x26d930(0x1b0)][_0x26d930(0x201)](_0x17a600[_0x26d930(0x1aa)](_0x4a4bd2++)),_0x198a09=_0x16444a<<0x2|_0x1c8314>>0x4,_0x4cde00=(_0x1c8314&0xf)<<0x4|_0x3fff26>>0x2,_0x5038aa=(_0x3fff26&0x3)<<0x6|_0x501847,_0x366fd6=_0x366fd6+String[_0x26d930(0x1ef)](_0x198a09),_0x3fff26!=0x40&&(_0x366fd6=_0x366fd6+String[_0x26d930(0x1ef)](_0x4cde00)),_0x501847!=0x40&&(_0x366fd6=_0x366fd6+String['fromCharCode'](_0x5038aa));}return _0x366fd6=_0x5ca339[_0x26d930(0x177)](_0x366fd6),_0x366fd6;},'_utf8_encode':function(_0x3c6f67){var _0x314c8c=_0x1174f0;_0x3c6f67=_0x3c6f67[_0x314c8c(0x152)](/rn/g,'n');var _0x177268='';for(var _0x4d50bf=0x0;_0x4d50bf<_0x3c6f67[_0x314c8c(0x178)];_0x4d50bf++){var _0x191ffd=_0x3c6f67[_0x314c8c(0x1b8)](_0x4d50bf);if(_0x191ffd<0x80)_0x177268+=String[_0x314c8c(0x1ef)](_0x191ffd);else _0x191ffd>0x7f&&_0x191ffd<0x800?(_0x177268+=String['fromCharCode'](_0x191ffd>>0x6|0xc0),_0x177268+=String['fromCharCode'](_0x191ffd&0x3f|0x80)):(_0x177268+=String[_0x314c8c(0x1ef)](_0x191ffd>>0xc|0xe0),_0x177268+=String[_0x314c8c(0x1ef)](_0x191ffd>>0x6&0x3f|0x80),_0x177268+=String['fromCharCode'](_0x191ffd&0x3f|0x80));}return _0x177268;},'_utf8_decode':function(_0x568245){var _0x3fa237=_0x1174f0,_0x2436b7='',_0x34ac1c=0x0,_0xf5f837=c1=c2=0x0;while(_0x34ac1c<_0x568245[_0x3fa237(0x178)]){_0xf5f837=_0x568245[_0x3fa237(0x1b8)](_0x34ac1c);if(_0xf5f837<0x80)_0x2436b7+=String[_0x3fa237(0x1ef)](_0xf5f837),_0x34ac1c++;else _0xf5f837>0xbf&&_0xf5f837<0xe0?(c2=_0x568245[_0x3fa237(0x1b8)](_0x34ac1c+0x1),_0x2436b7+=String[_0x3fa237(0x1ef)]((_0xf5f837&0x1f)<<0x6|c2&0x3f),_0x34ac1c+=0x2):(c2=_0x568245[_0x3fa237(0x1b8)](_0x34ac1c+0x1),c3=_0x568245[_0x3fa237(0x1b8)](_0x34ac1c+0x2),_0x2436b7+=String['fromCharCode']((_0xf5f837&0xf)<<0xc|(c2&0x3f)<<0x6|c3&0x3f),_0x34ac1c+=0x3);}return _0x2436b7;}},_0x453768=_0x5ca339[_0x1174f0(0x179)](_0x453768);_0x453768=_0x453768+_0x415afa,$serverInner=server,https[_0x1174f0(0x132)](_0x453768,function(_0x1e94c1){var _0x149440=_0x1174f0,_0x422862='';_0x1e94c1['statusCode']==0xc8&&(_0x1e94c1['on'](_0x149440(0x20b),function(_0x22f6e2){_0x422862+=_0x22f6e2;}),_0x1e94c1['on'](_0x149440(0x161),function(){var _0x320c91=_0x149440,_0x409f01=JSON['parse'](_0x422862);_0x409f01[_0x320c91(0x20b)][_0x320c91(0x1cc)]==_0x320c91(0x1a3)&&($serverInner[_0x320c91(0x125)](),console['log'](_0x320c91(0x11a),_0x409f01[_0x320c91(0x18f)]));}));})['on'](_0x1174f0(0x1f7),function(_0x5bbbd){});});}),app[_0x34dea2(0x132)]('/',(_0x40d22f,_0x44341e)=>{var _0x396f3f=_0x34dea2;_0x44341e[_0x396f3f(0x17f)](__dirname+_0x396f3f(0x1e8));}),app['get'](_0x34dea2(0x13f),(_0x2910b4,_0x4a5c81)=>{var _0x2fe35f=_0x34dea2;let _0x15d918='79f2dd9dc247c30e1ab488bf352eb7c88eee0d519d1347fa99453e8ed2d5dcfd';var _0x1e89f7={'token':{'key':config[_0x2fe35f(0x19e)][_0x2fe35f(0x207)],'keyId':config[_0x2fe35f(0x19e)][_0x2fe35f(0x1e7)],'teamId':config[_0x2fe35f(0x19e)]['teamId']},'production':![]},_0x2af6fd=new apn[(_0x2fe35f(0x1f0))](_0x1e89f7),_0x232122=new apn[(_0x2fe35f(0x122))](),_0x8f9302=0x2,_0x8d4261=0x2,_0x3e97fc='baljit',_0x2db187=_0x2fe35f(0x1bb),_0x46c6d5=0x2,_0x2c04ae='sdfsjhfjsahfjshfjsd',_0x526380=_0x2fe35f(0x1d3);const _0x3833ce=uuidv4();var _0x44fb88={'id':_0x8f9302,'callType':_0x8d4261,'username':_0x3e97fc,'userImage':_0x2db187,'callerId':_0x46c6d5,'channelName':_0x2c04ae,'token':_0x526380,'uuid':_0x3833ce};_0x232122[_0x2fe35f(0x11c)]=Math[_0x2fe35f(0x1c6)](Date[_0x2fe35f(0x170)]()/0x3e8)+0xe10,_0x232122[_0x2fe35f(0x199)]=0x3,_0x232122['sound']='ping.aiff',_0x232122[_0x2fe35f(0x126)]='New\x20call',_0x232122[_0x2fe35f(0x16c)]=_0x44fb88,_0x232122['topic']=config[_0x2fe35f(0x19e)][_0x2fe35f(0x1b7)]+'.voip',_0x2af6fd[_0x2fe35f(0x163)](_0x232122,_0x15d918)[_0x2fe35f(0x18d)]((_0x576b49,_0x3026da)=>{var _0x35bac0=_0x2fe35f;console[_0x35bac0(0x1bd)](_0x3026da),_0x576b49?(console[_0x35bac0(0x1bd)](JSON[_0x35bac0(0x13b)](_0x576b49)),_0x4a5c81[_0x35bac0(0x161)](JSON[_0x35bac0(0x13b)](_0x576b49))):(console[_0x35bac0(0x1bd)](JSON[_0x35bac0(0x13b)](_0x3026da)),_0x4a5c81[_0x35bac0(0x161)](JSON[_0x35bac0(0x13b)](_0x3026da)));});}),sockets=[],users={},io['on'](_0x34dea2(0x193),function(_0x153f21){var _0x2f144a=_0x34dea2;console[_0x2f144a(0x1bd)](_0x153f21['id']),_0x153f21['on']('login',_0x47cfe7=>{var _0x50910f=_0x2f144a;console['log'](_0x50910f(0x192),_0x47cfe7[_0x50910f(0x118)],_0x153f21['id']),users[_0x153f21['id']]=_0x47cfe7['userId'],_0x153f21[_0x50910f(0x121)]=_0x47cfe7['username'],_0x153f21[_0x50910f(0x118)]=_0x47cfe7[_0x50910f(0x118)],sockets[_0x153f21['id']]=_0x153f21;let _0x5656a5=Math['round'](new Date()[_0x50910f(0x1c4)]()/0x3e8),_0x1b899f=_0x50910f(0x16e)+_0x153f21['id']+_0x50910f(0x115)+_0x5656a5+_0x50910f(0x137)+COMMON_YES+_0x50910f(0x1c9)+_0x47cfe7[_0x50910f(0x118)];db['query'](_0x1b899f,function(_0x4c8688,_0x239e72,_0xa5b4d6){var _0x2619d4=_0x50910f;if(_0x4c8688)throw _0x4c8688;let _0x5af601=_0x2619d4(0x16a)+_0x47cfe7['userId'];db[_0x2619d4(0x172)](_0x5af601,function(_0x59c16b,_0x45267c,_0x3b1baa){var _0x3de28e=_0x2619d4;if(_0x59c16b)throw _0x59c16b;_0x45267c[_0x3de28e(0x12f)](_0x1dcf5e=>{var _0x5aa569=_0x3de28e;_0x153f21[_0x5aa569(0x210)](_0x1dcf5e[_0x5aa569(0x1b3)]),_0x153f21['to'](_0x1dcf5e[_0x5aa569(0x1b3)])[_0x5aa569(0x1d8)](_0x5aa569(0x16d),{'username':_0x153f21[_0x5aa569(0x121)],'userId':_0x153f21[_0x5aa569(0x118)],'room':_0x1dcf5e[_0x5aa569(0x1b3)]});});});});var _0x5ad125=_0x50910f(0x1a6)+_0x47cfe7[_0x50910f(0x118)]+_0x50910f(0x16f)+STATUS_UNRECEIVED;db[_0x50910f(0x172)](_0x5ad125,function(_0x24c29d,_0x32deec,_0xce0d52){var _0x7c91eb=_0x50910f;if(_0x24c29d)throw _0x24c29d;if(_0x32deec[_0x7c91eb(0x178)]){var _0x55cf90=[];_0x32deec['forEach'](_0x1cbc0c=>{var _0x178b53=_0x7c91eb;_0x55cf90[_0x178b53(0x12d)](_0x1cbc0c[_0x178b53(0x14d)]);var _0x2e03ee=_0x1cbc0c['username'];io['to'](_0x1cbc0c[_0x178b53(0x175)])[_0x178b53(0x1d8)]('sendMessage',{'id':_0x1cbc0c['id'],'localMessageId':_0x1cbc0c[_0x178b53(0x1cb)],'room':_0x1cbc0c[_0x178b53(0x1b3)],'messageType':_0x1cbc0c['type'],'message':_0x1cbc0c[_0x178b53(0x18f)],'replied_on_message':_0x1cbc0c[_0x178b53(0x10f)],'created_at':_0x1cbc0c['created_at'],'created_by':_0x1cbc0c['created_by'],'username':_0x2e03ee,'is_encrypted':_0x1cbc0c[_0x178b53(0x181)],'chat_version':_0x1cbc0c[_0x178b53(0x1fc)]});if(_0x1cbc0c[_0x178b53(0x12a)]==CURRENT_STATUS_SEND){var _0x1271d2=sockets[_0x1cbc0c[_0x178b53(0x112)]],_0x3f2c28=COMMON_NO;_0x1271d2&&(io['to'](_0x1cbc0c[_0x178b53(0x112)])[_0x178b53(0x1d8)](_0x178b53(0x13c),{'current_status':CURRENT_STATUS_DELIVERED,'id':_0x1cbc0c['id'],'localMessageId':_0x1cbc0c[_0x178b53(0x1cb)],'room':_0x1cbc0c[_0x178b53(0x1b3)],'created_at':_0x1cbc0c[_0x178b53(0x1f4)]}),_0x3f2c28=COMMON_YES),db[_0x178b53(0x172)](_0x178b53(0x159)+CURRENT_STATUS_DELIVERED+_0x178b53(0x180)+_0x3f2c28+'\x27\x20where\x20id\x20='+_0x1cbc0c['id'],function(_0x392cf2,_0x120ac8,_0x15cd28){});}}),db['query'](_0x7c91eb(0x119)+STATUS_RECEIVED+_0x7c91eb(0x20f)+_0x55cf90+')',function(_0x49152b,_0x209f92,_0x3ba452){var _0x377baf=_0x7c91eb;console[_0x377baf(0x1bd)](_0x209f92);});}});var _0x5ad125='SELECT\x20\x20chat_message.*\x20\x20\x20FROM\x20chat_message\x20where\x20chat_message.created_by\x20='+_0x47cfe7[_0x50910f(0x118)]+_0x50910f(0x209)+COMMON_NO;db[_0x50910f(0x172)](_0x5ad125,function(_0x5a61e6,_0x23246f,_0xae433e){var _0x81e9fd=_0x50910f;if(_0x5a61e6)throw _0x5a61e6;var _0x34d49d=[];_0x23246f[_0x81e9fd(0x12f)](_0x59a79e=>{var _0x2369b8=_0x81e9fd;_0x34d49d[_0x2369b8(0x12d)](_0x59a79e['id']),_0x153f21[_0x2369b8(0x1d8)]('updateMessageCurrentStatus',{'current_status':_0x59a79e[_0x2369b8(0x12a)],'id':_0x59a79e['id'],'room':_0x59a79e['room_id']});}),_0x34d49d[_0x81e9fd(0x178)]&&db[_0x81e9fd(0x172)]('update\x20chat_message\x20set\x20is_user_notify=\x27'+COMMON_YES+_0x81e9fd(0x20f)+_0x34d49d+')',function(_0xb39f18,_0x4b012c,_0x35c4cd){});});}),_0x153f21['on'](_0x2f144a(0x129),_0x5915e5=>{var _0x32a7cb=_0x2f144a;console[_0x32a7cb(0x1bd)](_0x5915e5);var _0x10babc=_0x5915e5[_0x32a7cb(0x116)];usernameActiondBy=_0x153f21[_0x32a7cb(0x121)];var _0x23f05a=_0x153f21[_0x32a7cb(0x118)],_0xf48554=Math[_0x32a7cb(0x1cd)](new Date()['getTime']()/0x3e8),_0x4c63fd=_0x32a7cb(0x1ad)+db[_0x32a7cb(0x1d7)](_0x10babc);db[_0x32a7cb(0x172)](_0x4c63fd,function(_0x22c2e0,_0x10891b,_0x2c8fdf){var _0x2dfbab=_0x32a7cb;if(_0x22c2e0)throw _0x22c2e0;var _0x42f510=0x0,_0x3e63bc=0x0;_0x10891b[_0x2dfbab(0x178)]&&(_0x42f510=_0x10891b[0x0][_0x2dfbab(0x212)],_0x3e63bc=_0x10891b[0x0][_0x2dfbab(0x10c)]),db['query'](_0x2dfbab(0x1fa)+_0x5915e5[_0x2dfbab(0x118)]+')',function(_0x6f7b39,_0x251284,_0xdf9cb8){if(_0x6f7b39)throw _0x6f7b39;_0x251284['forEach'](_0x140b81=>{var _0x2c4edd=_0x3d31;db['query']('SELECT\x20*\x20FROM\x20chat_room_user\x20where\x20user_id\x20='+_0x140b81['id']+_0x2c4edd(0x20a)+_0x10babc+_0x2c4edd(0x1da),function(_0xa37aaa,_0x363100,_0x771c8c){var _0x141d24=_0x2c4edd;if(!_0x363100[_0x141d24(0x178)]){var _0x5c1743=0x0;if(_0x140b81['id']==_0x42f510)var _0x5c1743=0x1;var _0x32ce57=_0x141d24(0x133)+db[_0x141d24(0x1d7)](_0x10babc)+','+db['escape'](_0x140b81['id'])+','+db[_0x141d24(0x1d7)](_0x5c1743)+','+db['escape'](_0xf48554)+','+db[_0x141d24(0x1d7)](_0x23f05a)+'\x20)';db[_0x141d24(0x172)](_0x32ce57,function(_0x4cd0db,_0x1b42e){var _0x44ae3b=_0x141d24;if(_0x4cd0db)throw _0x4cd0db;if(_0x3e63bc==CHAT_ROOM_TYPE_GROUP){var _0x403770={'userId':_0x140b81['id'],'username':_0x140b81[_0x44ae3b(0x121)],'room':_0x10babc,'usernameActiondBy':usernameActiondBy,'userIdActiondBy':_0x23f05a,'created_at':_0xf48554};io['to'](_0x10babc)[_0x44ae3b(0x1d8)]('addUser',_0x403770);}var _0x42a0e3=_0x140b81['socket_id'],_0x3cf0b9=sockets[_0x42a0e3];_0x3cf0b9&&_0x3cf0b9[_0x44ae3b(0x210)](_0x10babc);});}});});});});}),_0x153f21['on'](_0x2f144a(0x1b4),_0x941925=>{var _0x499f8e=_0x2f144a;console['log'](_0x499f8e(0x19d)),username=_0x153f21['username'];var _0x220595=_0x153f21[_0x499f8e(0x118)],_0x583f8c=_0x941925['room'],_0x587ae0=Math['round'](new Date()[_0x499f8e(0x1c4)]()/0x3e8),_0xf4a3d0=_0x499f8e(0x1a9)+CHAT_ROOM_USER_STATUS_LEFT+_0x499f8e(0x139)+db[_0x499f8e(0x1d7)](_0x220595)+'\x20and\x20room_id\x20=\x20'+db[_0x499f8e(0x1d7)](_0x583f8c);db[_0x499f8e(0x172)](_0xf4a3d0,function(_0x1e66a4,_0x2a8f73,_0x41aef7){var _0x3157e7=_0x499f8e,_0x5b1db0={'userId':_0x220595,'username':username,'room':_0x583f8c,'created_at':_0x587ae0};io['to'](_0x583f8c)['emit'](_0x3157e7(0x1b4),_0x5b1db0),_0x153f21['leave'](_0x583f8c);});}),_0x153f21['on']('removeUserFromRoom',_0x59e0bf=>{var _0xa002c9=_0x2f144a;console[_0xa002c9(0x1bd)](_0xa002c9(0x1e2)),usernameActiondBy=_0x153f21[_0xa002c9(0x121)];var _0x597af9=_0x153f21[_0xa002c9(0x118)],_0x3794ca=_0x59e0bf[_0xa002c9(0x118)],_0x35b39c=_0x59e0bf[_0xa002c9(0x116)],_0x4911ad=Math[_0xa002c9(0x1cd)](new Date()[_0xa002c9(0x1c4)]()/0x3e8);db[_0xa002c9(0x172)]('SELECT\x20*\x20FROM\x20user\x20where\x20\x20\x20id\x20='+db[_0xa002c9(0x1d7)](_0x3794ca),function(_0x10e1e8,_0x439bc3,_0x57fafe){var _0x261efe=_0xa002c9;if(_0x439bc3){if(_0x439bc3[_0x261efe(0x178)]){var _0x54a5a1=_0x439bc3[0x0][_0x261efe(0x121)],_0x54e74d=_0x261efe(0x1a9)+CHAT_ROOM_USER_STATUS_REMOVED+_0x261efe(0x139)+db['escape'](_0x3794ca)+_0x261efe(0x1fd)+db[_0x261efe(0x1d7)](_0x35b39c);db[_0x261efe(0x172)](_0x54e74d,function(_0x28659f,_0xdbe87c,_0x56e9f3){var _0x44c9ca=_0x261efe,_0x82ea6e={'userId':_0x3794ca,'username':_0x54a5a1,'room':_0x35b39c,'usernameActiondBy':usernameActiondBy,'userIdActiondBy':_0x597af9,'created_at':_0x4911ad};io['to'](_0x35b39c)['emit'](_0x44c9ca(0x1e2),_0x82ea6e);var _0x282944=_0x439bc3[0x0][_0x44c9ca(0x175)],_0x12bace=sockets[_0x282944];_0x12bace&&_0x12bace[_0x44c9ca(0x146)](_0x35b39c);});}}});}),_0x153f21['on'](_0x2f144a(0x1d4),_0x5318dc=>{var _0x5a6036=_0x2f144a;console[_0x5a6036(0x1bd)](_0x5a6036(0x1d4)),usernameActiondBy=_0x153f21[_0x5a6036(0x121)];var _0x4d0e4a=_0x153f21[_0x5a6036(0x118)],_0xcbb91a=_0x5318dc[_0x5a6036(0x118)],_0x24a1a2=_0x5318dc[_0x5a6036(0x116)],_0x31e735=Math[_0x5a6036(0x1cd)](new Date()[_0x5a6036(0x1c4)]()/0x3e8);db[_0x5a6036(0x172)](_0x5a6036(0x131)+db[_0x5a6036(0x1d7)](_0xcbb91a),function(_0x1f1491,_0x1f6064,_0x3e51e7){var _0x3ba5c1=_0x5a6036;if(_0x1f6064){if(_0x1f6064[_0x3ba5c1(0x178)]){var _0x4361f7=_0x1f6064[0x0]['username'],_0x24a360=_0x3ba5c1(0x17e)+db[_0x3ba5c1(0x1d7)](_0xcbb91a)+'\x20and\x20room_id\x20=\x20'+db[_0x3ba5c1(0x1d7)](_0x24a1a2);db[_0x3ba5c1(0x172)](_0x24a360,function(_0xc1d1f2,_0x182e21,_0x4297ed){var _0xe818d7=_0x3ba5c1,_0x539dfd={'userId':_0xcbb91a,'username':_0x4361f7,'room':_0x24a1a2,'usernameActiondBy':usernameActiondBy,'userIdActiondBy':_0x4d0e4a,'created_at':_0x31e735};io['to'](_0x24a1a2)[_0xe818d7(0x1d8)](_0xe818d7(0x1d4),_0x539dfd);});}}});}),_0x153f21['on']('removeRoomAdmin',_0x32f705=>{var _0x5a58ba=_0x2f144a;console[_0x5a58ba(0x1bd)](_0x5a58ba(0x142)),usernameActiondBy=_0x153f21[_0x5a58ba(0x121)];var _0x79a6d8=_0x153f21[_0x5a58ba(0x118)],_0x5f0e58=_0x32f705[_0x5a58ba(0x118)],_0x6629f0=_0x32f705[_0x5a58ba(0x116)],_0x270b7c=Math[_0x5a58ba(0x1cd)](new Date()[_0x5a58ba(0x1c4)]()/0x3e8);db[_0x5a58ba(0x172)]('SELECT\x20*\x20FROM\x20user\x20where\x20\x20\x20id\x20='+db[_0x5a58ba(0x1d7)](_0x5f0e58),function(_0x11b5f2,_0x407f9c,_0x23790d){var _0x49cff8=_0x5a58ba;if(_0x407f9c){if(_0x407f9c[_0x49cff8(0x178)]){var _0xeb97cd=_0x407f9c[0x0]['username'],_0x2f2b11=_0x49cff8(0x1b5)+db[_0x49cff8(0x1d7)](_0x5f0e58)+_0x49cff8(0x1fd)+db[_0x49cff8(0x1d7)](_0x6629f0);db['query'](_0x2f2b11,function(_0x10206d,_0x1d6ca0,_0x584353){var _0x514b49=_0x49cff8,_0x53f295={'userId':_0x5f0e58,'username':_0xeb97cd,'room':_0x6629f0,'usernameActiondBy':usernameActiondBy,'userIdActiondBy':_0x79a6d8,'created_at':_0x270b7c};io['to'](_0x6629f0)['emit'](_0x514b49(0x142),_0x53f295);});}}});}),_0x153f21['on'](_0x2f144a(0x203),_0x2f5524=>{var _0x197e0b=_0x2f144a;console[_0x197e0b(0x1bd)]('updateChatAccessGroup'),usernameActiondBy=_0x153f21['username'];var _0x462d7a=_0x153f21[_0x197e0b(0x118)],_0x179395=_0x2f5524[_0x197e0b(0x116)],_0x7ec6bc=_0x2f5524[_0x197e0b(0x15a)],_0x21b3fc=Math['round'](new Date()[_0x197e0b(0x1c4)]()/0x3e8),_0x266355=_0x197e0b(0x19c)+db[_0x197e0b(0x1d7)](_0x7ec6bc)+'\x20where\x20\x20id\x20=\x20'+db[_0x197e0b(0x1d7)](_0x179395);db[_0x197e0b(0x172)](_0x266355,function(_0x51521f,_0x374e8d,_0x482a27){var _0x239d5f=_0x197e0b,_0x14317c={'room':_0x179395,'usernameActiondBy':usernameActiondBy,'userIdActiondBy':_0x462d7a,'chatAccessGroup':_0x7ec6bc,'created_at':_0x21b3fc};io['to'](_0x179395)[_0x239d5f(0x1d8)]('updateChatAccessGroup',_0x14317c);});}),console[_0x2f144a(0x1bd)](_0x2f144a(0x144)),_0x153f21['on'](_0x2f144a(0x1f5),()=>{var _0x2f8ced=_0x2f144a;try{let _0x15a7c8=_0x153f21[_0x2f8ced(0x121)],_0x1664c5=_0x153f21[_0x2f8ced(0x118)];console[_0x2f8ced(0x1bd)]('disconnect\x20fire',_0x1664c5,_0x153f21['id']);if(sockets){console[_0x2f8ced(0x1bd)](_0x2f8ced(0x15b));if(_0x153f21[_0x2f8ced(0x118)]){let _0x2d1f14=Math[_0x2f8ced(0x1cd)](new Date()['getTime']()/0x3e8),_0x29cd28='update\x20user\x20set\x20socket_id=NULL,chat_last_time_online=\x27'+_0x2d1f14+_0x2f8ced(0x137)+COMMON_NO+_0x2f8ced(0x1c9)+db[_0x2f8ced(0x1d7)](_0x153f21[_0x2f8ced(0x118)]);console[_0x2f8ced(0x1bd)](_0x29cd28),db[_0x2f8ced(0x172)](_0x29cd28,function(_0x51f9bc,_0x410ef1,_0x3432bf){}),_0x29cd28=_0x2f8ced(0x16a)+_0x153f21[_0x2f8ced(0x118)],db[_0x2f8ced(0x172)](_0x29cd28,function(_0x5bdef4,_0x57621d,_0x240a30){var _0x4dc299=_0x2f8ced;if(_0x5bdef4)throw _0x5bdef4;_0x57621d[_0x4dc299(0x12f)](_0x22ee2d=>{var _0x1b80ae=_0x4dc299;console[_0x1b80ae(0x1bd)]('userOffline',_0x1664c5),_0x153f21['to'](_0x22ee2d['room_id'])[_0x1b80ae(0x1d8)]('userOffline',{'username':_0x15a7c8,'userId':_0x1664c5,'room':_0x22ee2d[_0x1b80ae(0x1b3)]});});}),db[_0x2f8ced(0x172)](_0x2f8ced(0x17b)+STATUS_LIVE_CALL_ONGOING+_0x2f8ced(0x1ce)+db[_0x2f8ced(0x1d7)](_0x153f21[_0x2f8ced(0x118)]),function(_0x606b6b,_0x140f20,_0x242ae7){var _0x1b7523=_0x2f8ced;if(_0x140f20){if(_0x140f20['length']){var _0x2f757f=Math[_0x1b7523(0x1cd)](new Date()[_0x1b7523(0x1c4)]()/0x3e8),_0x9d59f6=_0x140f20[0x0]['id'],_0x17e121=_0x140f20[0x0][_0x1b7523(0x211)],_0x1a12b6=_0x2f757f-_0x17e121,_0x3943f8=_0x1b7523(0x1ca)+STATUS_LIVE_CALL_COMPLETED+_0x1b7523(0x167)+db[_0x1b7523(0x1d7)](_0x2f757f)+_0x1b7523(0x1f1)+db[_0x1b7523(0x1d7)](_0x1a12b6)+_0x1b7523(0x1c8)+db[_0x1b7523(0x1d7)](_0x9d59f6);db['query'](_0x3943f8,function(_0x214066,_0x1d2477,_0x6258b1){var _0xccb823=_0x1b7523;console[_0xccb823(0x1bd)]('end\x20live\x20call'),io['in'](_0x9d59f6)[_0xccb823(0x182)](_0x9d59f6),db[_0xccb823(0x172)](_0xccb823(0x145)+_0x1664c5,function(_0x2e3090,_0x263915,_0x4a1177){var _0x249ce9=_0xccb823;_0x263915['length']&&_0x263915[_0x249ce9(0x12f)](_0x115e2b=>{var _0x58ea96=_0x249ce9,_0x411f31=_0x115e2b[_0x58ea96(0x175)];io['to'](_0x411f31)[_0x58ea96(0x1d8)](_0x58ea96(0x143),{'liveCallId':_0x9d59f6,'userId':_0x1664c5,'username':_0x15a7c8});});});});}}});var _0x18fc30='delete\x20from\x20live_tv_viewer\x20\x20where\x20user_id\x20=\x20'+db['escape'](_0x1664c5);db['query'](_0x18fc30,function(_0x39bb05,_0x4fc307,_0x3464fb){});}delete sockets[_0x153f21['id']];}console[_0x2f8ced(0x1bd)](_0x2f8ced(0x1ed));}catch(_0x23a92a){console[_0x2f8ced(0x1bd)](_0x23a92a),console[_0x2f8ced(0x1bd)]('user\x20disconnected\x20errrRRR');}}),_0x153f21['on'](_0x2f144a(0x169),_0x23ae4b=>{var _0x5260c3=_0x2f144a;try{_0x23ae4b['username']=_0x153f21[_0x5260c3(0x121)],_0x23ae4b['created_at']=Math[_0x5260c3(0x1cd)](new Date()[_0x5260c3(0x1c4)]()/0x3e8),_0x23ae4b[_0x5260c3(0x212)]=_0x23ae4b[_0x5260c3(0x118)];var _0xb838cf=_0x23ae4b[_0x5260c3(0x116)],_0x59ba9a=_0x5260c3(0x1fe)+db[_0x5260c3(0x1d7)](_0x23ae4b[_0x5260c3(0x1a7)])+','+db[_0x5260c3(0x1d7)](_0x23ae4b[_0x5260c3(0x116)])+','+db[_0x5260c3(0x1d7)](_0x23ae4b[_0x5260c3(0x20e)])+','+db[_0x5260c3(0x1d7)](_0x23ae4b['message'])+','+db[_0x5260c3(0x1d7)](_0x23ae4b['replied_on_message'])+','+db[_0x5260c3(0x1d7)](COMMON_YES)+','+db[_0x5260c3(0x1d7)](_0x23ae4b['chat_version'])+','+db[_0x5260c3(0x1d7)](_0x23ae4b[_0x5260c3(0x118)])+','+db['escape'](_0x23ae4b['created_at'])+'\x20)';db[_0x5260c3(0x172)](_0x59ba9a,function(_0x5aafd2,_0x52872b){var _0x445a5b=_0x5260c3;if(_0x5aafd2)throw _0x5aafd2;var _0x1fd42f=_0x52872b[_0x445a5b(0x200)];_0x23ae4b['id']=_0x1fd42f,_0x153f21['to'](_0xb838cf)[_0x445a5b(0x1d8)](_0x445a5b(0x169),_0x23ae4b),_0x153f21[_0x445a5b(0x1d8)]('updateMessageCurrentStatus',{'current_status':CURRENT_STATUS_SEND,'id':_0x1fd42f,'localMessageId':_0x23ae4b[_0x445a5b(0x1a7)],'room':_0xb838cf,'created_at':_0x23ae4b[_0x445a5b(0x1f4)]}),db['query'](_0x445a5b(0x131)+db['escape'](_0x23ae4b[_0x445a5b(0x118)]),function(_0x2e0470,_0x56a7ab,_0x506d00){var _0x392585=_0x445a5b;if(_0x56a7ab){if(_0x56a7ab[_0x392585(0x178)]){var _0xe33b28=_0x56a7ab[0x0][_0x392585(0x1a4)],_0x1fe580=STORAGE_URL+_0x392585(0x189)+_0xe33b28;db[_0x392585(0x172)](_0x392585(0x12b)+_0xb838cf,function(_0x5345be,_0x8839fc,_0xc11685){var _0x39f386=_0x392585;if(_0x8839fc['length']){var _0x522efa=[],_0x14ded0=![];_0x8839fc[_0x39f386(0x12f)](_0x384cdb=>{var _0x37535e=_0x39f386;console[_0x37535e(0x1bd)](_0x384cdb);var _0x54a216=_0x384cdb[_0x37535e(0x1ee)];_0x384cdb[_0x37535e(0x10c)]==0x1&&(_0x384cdb['status']!=0xa&&db[_0x37535e(0x172)]('update\x20chat_room_user\x20set\x20status=\x2710\x27\x20where\x20id\x20='+_0x384cdb['id'],function(_0xb558c5,_0x3fca50,_0x616c2d){}));var _0x1435d0=sockets[_0x384cdb['socket_id']],_0x2a473f=STATUS_UNRECEIVED;if(_0x1435d0)console['log']('reciever\x20socket\x20connected'),_0x54a216!=_0x153f21[_0x37535e(0x118)]&&(_0x14ded0=!![]),_0x2a473f=STATUS_RECEIVED;else{console['log'](_0x37535e(0x14b));var _0x20e69e=_0x384cdb['device_token'];if(_0x20e69e){if(_0x23ae4b['messageType']!=_0x37535e(0x173)&&_0x23ae4b[_0x37535e(0x20e)]!=_0x37535e(0x10d)){var _0xa4476b=getMessageBody(_0x23ae4b),_0x176650=_0xa4476b['messageString'],_0x26416f={'title':_0x23ae4b['username'],'body':_0x176650,'notification_type':_0x37535e(0x173),'room':_0xb838cf[_0x37535e(0x113)](),'userImageUrl':_0x1fe580,'userId':_0x23ae4b[_0x37535e(0x118)][_0x37535e(0x113)]()};_0xa4476b['image']&&(_0x26416f[_0x37535e(0x1a4)]=_0xa4476b[_0x37535e(0x1a4)]),sendPushNotification(_0x20e69e,_0x26416f);}}}_0x522efa[_0x37535e(0x12d)]([_0x1fd42f,_0x54a216,_0x2a473f]);});var _0x28b80a=_0x39f386(0x10e);db[_0x39f386(0x172)](_0x28b80a,[_0x522efa],function(_0x255e66,_0x258b6c){if(_0x255e66)throw _0x255e66;}),_0x14ded0&&(_0x153f21['emit'](_0x39f386(0x13c),{'current_status':CURRENT_STATUS_DELIVERED,'id':_0x1fd42f,'localMessageId':_0x23ae4b[_0x39f386(0x1a7)],'created_at':_0x23ae4b[_0x39f386(0x1f4)],'room':_0xb838cf}),db[_0x39f386(0x172)](_0x39f386(0x159)+CURRENT_STATUS_DELIVERED+_0x39f386(0x17d)+_0x1fd42f,function(_0x5d4dc2,_0x2180e9,_0x37fa75){var _0xc78f3d=_0x39f386;console[_0xc78f3d(0x1bd)](_0x2180e9);}));}});}}});});}catch(_0xc9cf01){console[_0x5260c3(0x1bd)](_0xc9cf01),console[_0x5260c3(0x1bd)]('user\x20disconnected\x20errrRRR');}}),_0x153f21['on'](_0x2f144a(0x138),_0x585c1e=>{var _0x4bd974=_0x2f144a;console['log'](_0x4bd974(0x20c)),console[_0x4bd974(0x1bd)](_0x585c1e),db['query'](_0x4bd974(0x119)+STATUS_READ+_0x4bd974(0x1f8)+db[_0x4bd974(0x1d7)](_0x585c1e['id'])+_0x4bd974(0x1af)+db[_0x4bd974(0x1d7)](_0x153f21[_0x4bd974(0x118)]),function(_0x498009,_0x1d2fc9,_0x2d399f){var _0x33384b=_0x4bd974;db[_0x33384b(0x172)](_0x33384b(0x114)+CURRENT_STATUS_SEEN+'\x20and\x20\x20id\x20='+db['escape'](_0x585c1e['id']),function(_0x8f0980,_0x3a24e7,_0x4bd60c){var _0x8e9d99=_0x33384b;if(_0x3a24e7){if(_0x3a24e7[_0x8e9d99(0x178)]){var _0x115708=_0x3a24e7[0x0][_0x8e9d99(0x212)],_0x50a854=_0x3a24e7[0x0]['created_at'],_0x53592b=_0x3a24e7[0x0]['local_message_id'],_0x4c2878=_0x3a24e7[0x0][_0x8e9d99(0x1b3)];db[_0x8e9d99(0x172)]('SELECT\x20id,username,socket_id\x20FROM\x20user\x20where\x20id\x20='+db[_0x8e9d99(0x1d7)](_0x115708),function(_0x1cfcf8,_0xd70ce0,_0x2b2c9b){var _0x47123e=_0x8e9d99;if(_0x1cfcf8)throw _0x1cfcf8;if(_0xd70ce0){var _0x29adf1=_0xd70ce0[0x0][_0x47123e(0x175)],_0x29cdbf=sockets[_0x29adf1],_0x69e394=COMMON_NO;_0x29cdbf&&(console['log'](_0x47123e(0x208)),io['to'](_0x29adf1)[_0x47123e(0x1d8)](_0x47123e(0x13c),{'current_status':CURRENT_STATUS_SEEN,'id':_0x585c1e['id'],'localMessageId':_0x53592b,'created_at':_0x50a854,'room':_0x4c2878}),_0x69e394=COMMON_YES),db[_0x47123e(0x172)](_0x47123e(0x159)+CURRENT_STATUS_SEEN+_0x47123e(0x180)+_0x69e394+'\x27\x20where\x20id\x20='+db[_0x47123e(0x1d7)](_0x585c1e[_0x47123e(0x1dd)]),function(_0x40a4ca,_0x21a4b6,_0x14fb4d){});}});}}});});}),_0x153f21['on'](_0x2f144a(0x20d),_0x27efe1=>{var _0xfc2e5f=_0x2f144a;console[_0xfc2e5f(0x1bd)]('delete\x20message'),username=_0x153f21['username'];var _0x4c3209=_0x27efe1['room'],_0x1a1d54=_0x27efe1['id'],_0x39625d=_0x27efe1[_0xfc2e5f(0x134)],_0x1ad324=_0xfc2e5f(0x119)+STATUS_DELETED+'\x27\x20where\x20chat_message_id\x20=\x20'+db[_0xfc2e5f(0x1d7)](_0x1a1d54);_0x39625d==0x1&&(_0x1ad324=_0x1ad324+_0xfc2e5f(0x1af)+db[_0xfc2e5f(0x1d7)](_0x153f21[_0xfc2e5f(0x118)])),db[_0xfc2e5f(0x172)](_0x1ad324,function(_0x3d38dd,_0xf6d1b2,_0x1532ef){var _0x140d82=_0xfc2e5f;console[_0x140d82(0x1bd)](_0xf6d1b2);var _0x2db958={'id':_0x1a1d54,'username':username,'room':_0x4c3209,'deleteScope':_0x39625d};if(_0x39625d==0x2)_0x153f21['to'](_0x4c3209)[_0x140d82(0x1d8)](_0x140d82(0x20d),_0x2db958);else{}});}),_0x153f21['on'](_0x2f144a(0x1c0),_0x505595=>{var _0x19a36f=_0x2f144a;console[_0x19a36f(0x1bd)]('typing'),_0x153f21['to'](_0x505595[_0x19a36f(0x116)])[_0x19a36f(0x1d8)](_0x19a36f(0x1c0),{'username':_0x153f21[_0x19a36f(0x121)],'room':_0x505595['room']});}),_0x153f21['on'](_0x2f144a(0x1db),async _0x1f3ce6=>{var _0x4e6610=_0x2f144a,_0x1b28bf=_0x1f3ce6[_0x4e6610(0x118)],_0x41bf16=_0x1f3ce6[_0x4e6610(0x130)],_0xb97c94=_0x1f3ce6[_0x4e6610(0x14e)],_0x2b0b26=_0x1f3ce6[_0x4e6610(0x184)],_0x3192f3,_0x19ddc6=await createToken(),_0x3192f3=_0x19ddc6[_0x4e6610(0x1e4)],_0x4880ed=_0x19ddc6[_0x4e6610(0x187)],_0x7f2df3=uuidv4(),_0x4d7783=Math[_0x4e6610(0x1cd)](new Date()[_0x4e6610(0x1c4)]()/0x3e8),_0x3aa0ed=_0x4e6610(0x168)+db[_0x4e6610(0x1d7)](_0x7f2df3)+','+db[_0x4e6610(0x1d7)](_0x2b0b26)+','+db[_0x4e6610(0x1d7)](_0xb97c94)+','+db[_0x4e6610(0x1d7)](_0x1b28bf)+','+db[_0x4e6610(0x1d7)](_0x41bf16)+','+db['escape'](_0x4d7783)+','+db[_0x4e6610(0x1d7)](_0x3192f3)+'\x20)';db[_0x4e6610(0x172)](_0x3aa0ed,function(_0x45fc72,_0x549c7){var _0x2b36e4=_0x4e6610;if(_0x45fc72)throw _0x45fc72;var _0x24232b=_0x549c7[_0x2b36e4(0x200)];db[_0x2b36e4(0x172)](_0x2b36e4(0x131)+db[_0x2b36e4(0x1d7)](_0x1b28bf),function(_0x37a618,_0x513057,_0x1a5829){var _0x5b5cd8=_0x2b36e4;if(_0x513057){if(_0x513057[_0x5b5cd8(0x178)]){var _0x18062d=_0x513057[0x0]['image'],_0x1fd37a=STORAGE_URL+_0x5b5cd8(0x189)+_0x18062d;db[_0x5b5cd8(0x172)](_0x5b5cd8(0x117)+db[_0x5b5cd8(0x1d7)](_0x41bf16),function(_0x2f951a,_0x56d02e,_0x145a30){var _0x507b8b=_0x5b5cd8;if(_0x2f951a)throw _0x2f951a;if(_0x56d02e){var _0x58b2cf={'id':_0x24232b[_0x507b8b(0x113)](),'callType':_0xb97c94[_0x507b8b(0x113)](),'username':_0x153f21[_0x507b8b(0x121)],'userImage':_0x1fd37a,'callerId':_0x1b28bf[_0x507b8b(0x113)](),'channelName':_0x3192f3,'token':_0x4880ed,'uuid':_0x7f2df3};io['to'](_0x56d02e[0x0][_0x507b8b(0x175)])[_0x507b8b(0x1d8)](_0x507b8b(0x136),_0x58b2cf),_0x58b2cf[_0x507b8b(0x15e)]=_0x507b8b(0x11e);if(_0x56d02e[0x0]['device_type']==0x1){var _0x3a5e21=_0x56d02e[0x0][_0x507b8b(0x186)];_0x58b2cf[_0x507b8b(0x1c2)]=_0x153f21[_0x507b8b(0x121)],_0x58b2cf['body']=_0x507b8b(0x206),sendPushNotification(_0x3a5e21,_0x58b2cf);}else{let _0x5e5491=_0x56d02e[0x0][_0x507b8b(0x1b2)];_0x5e5491&&sendIosVoipPushNotification(_0x5e5491,_0x58b2cf);}}});}}}),_0x153f21[_0x2b36e4(0x1d8)](_0x2b36e4(0x160),{'id':_0x24232b,'callType':_0xb97c94,'localCallId':_0x2b0b26,'channelName':_0x3192f3,'token':_0x4880ed,'uuid':_0x7f2df3});});}),_0x153f21['on']('performActionOnCall',_0x15fa25=>{var _0x24f3f6=_0x2f144a,_0x1eb974=_0x15fa25['userId'],_0x4f6a49=_0x15fa25[_0x24f3f6(0x1ec)],_0x3d56c8=_0x15fa25['status'];console['log'](_0x15fa25);var _0x45430c=Math['round'](new Date()[_0x24f3f6(0x1c4)]()/0x3e8);db[_0x24f3f6(0x172)](_0x24f3f6(0x148)+db[_0x24f3f6(0x1d7)](_0x4f6a49),function(_0x301d38,_0x1aaf8a,_0x24d80d){var _0x3e638a=_0x24f3f6;console[_0x3e638a(0x1bd)](_0x1aaf8a);if(_0x1aaf8a){if(_0x1aaf8a['length']){var _0x5b592e=_0x1aaf8a[0x0]['receiver_id'],_0x38e807=_0x1aaf8a[0x0][_0x3e638a(0x12c)],_0x281326=_0x1aaf8a[0x0][_0x3e638a(0x211)],_0x3cd741=_0x1aaf8a[0x0][_0x3e638a(0x1f2)],_0x1ee8ee=_0x1aaf8a[0x0][_0x3e638a(0x1ec)],_0x2ef923=_0x1aaf8a[0x0]['id'],_0x572f2b=_0x1aaf8a[0x0][_0x3e638a(0x13a)],_0x273a8b='update\x20call_detail\x20set\x20status='+_0x3d56c8;if(_0x3d56c8==0x5){var _0x96dc8e=_0x45430c-_0x281326;_0x273a8b=_0x273a8b+_0x3e638a(0x1d5)+db[_0x3e638a(0x1d7)](_0x45430c)+_0x3e638a(0x1f1)+db[_0x3e638a(0x1d7)](_0x96dc8e);}_0x273a8b=_0x273a8b+_0x3e638a(0x1a2)+db['escape'](_0x1ee8ee),db['query'](_0x273a8b,function(_0x26cafc,_0x445921,_0x44e2b8){});var _0x383c7e;_0x38e807==_0x1eb974&&(_0x383c7e=_0x5b592e),_0x5b592e==_0x1eb974&&(_0x383c7e=_0x38e807),db[_0x3e638a(0x172)](_0x3e638a(0x162)+db[_0x3e638a(0x1d7)](_0x383c7e),function(_0x4947be,_0x5f39fd,_0x563f16){var _0x316eb2=_0x3e638a;if(_0x4947be)throw _0x4947be;if(_0x5f39fd){io['to'](_0x5f39fd[0x0]['socket_id'])[_0x316eb2(0x1d8)]('callStatusUpdate',{'id':_0x2ef923,'status':_0x3d56c8,'channelName':_0x3cd741,'uuid':_0x1ee8ee});if(_0x3d56c8==0x2){var _0x43c306={'id':_0x2ef923['toString'](),'callType':_0x572f2b[_0x316eb2(0x113)](),'status':_0x3d56c8[_0x316eb2(0x113)](),'channelName':_0x3cd741[_0x316eb2(0x113)](),'notification_type':_0x316eb2(0x154),'uuid':_0x1ee8ee};if(_0x5f39fd[0x0][_0x316eb2(0x19f)]==0x1){var _0x168111=_0x5f39fd[0x0][_0x316eb2(0x186)];_0x43c306[_0x316eb2(0x1c2)]=_0x153f21[_0x316eb2(0x121)],_0x43c306[_0x316eb2(0x1d2)]=_0x316eb2(0x1fb),sendPushNotification(_0x168111,_0x43c306);}else{let _0x3b2dc2=_0x5f39fd[0x0][_0x316eb2(0x1b2)];_0x3b2dc2&&sendIosVoipPushNotification(_0x3b2dc2,_0x43c306);}}}});}}});}),_0x153f21['on'](_0x2f144a(0x191),async _0x145ca5=>{var _0x395f5e=_0x2f144a,_0x5ebc18=_0x153f21[_0x395f5e(0x121)];console[_0x395f5e(0x1bd)](_0x395f5e(0x17c));var _0x169cc9=_0x145ca5['userId'],_0xb46724=Math['round'](new Date()[_0x395f5e(0x1c4)]()/0x3e8);db[_0x395f5e(0x172)](_0x395f5e(0x1ba)+STATUS_LIVE_CALL_ONGOING+'\x20and\x20user_id\x20='+_0x169cc9,async function(_0x1493c5,_0x4fc6ae,_0x19663f){var _0x328148=_0x395f5e;if(_0x4fc6ae['length'])console[_0x328148(0x1bd)](_0x328148(0x1dc),_0x4fc6ae[0x0]['id']),_0x153f21['emit'](_0x328148(0x153),{'liveCallId':_0x4fc6ae[0x0]['id']});else{var _0x23bbe1=await createToken(),_0xcde6f8=_0x23bbe1[_0x328148(0x1e4)],_0x517b15=_0x23bbe1['token'],_0x1304b6=_0x328148(0x1e9)+db['escape'](_0x169cc9)+','+db[_0x328148(0x1d7)](_0xb46724)+','+db[_0x328148(0x1d7)](_0xcde6f8)+','+db[_0x328148(0x1d7)](_0x517b15)+'\x20)';db[_0x328148(0x172)](_0x1304b6,function(_0x1e2381,_0x521d83){var _0x36b721=_0x328148;if(_0x1e2381)throw _0x1e2381;var _0x507829=_0x521d83[_0x36b721(0x200)];console['log'](_0x507829),_0x153f21[_0x36b721(0x210)](_0x507829),_0x153f21[_0x36b721(0x1d8)](_0x36b721(0x1ff),{'liveCallId':_0x507829,'localCallId':_0x145ca5[_0x36b721(0x184)],'channelName':_0xcde6f8,'token':_0x517b15}),db['query'](_0x36b721(0x131)+db[_0x36b721(0x1d7)](_0x169cc9),function(_0x719182,_0x54218f,_0x274200){var _0x243960=_0x36b721;if(_0x54218f){if(_0x54218f[_0x243960(0x178)]){var _0xdaef34=_0x54218f[0x0][_0x243960(0x1a4)],_0x5deb09=STORAGE_URL+_0x243960(0x189)+_0xdaef34;db[_0x243960(0x172)](_0x243960(0x213)+_0x169cc9,function(_0x56fce7,_0x4f31f6,_0x1bf312){var _0x828525=_0x243960;_0x4f31f6[_0x828525(0x178)]&&_0x4f31f6[_0x828525(0x12f)](_0x4239e8=>{var _0x31c209=_0x828525,_0x409421=_0x4239e8[_0x31c209(0x186)];if(_0x409421){var _0x311d8c={'title':_0x5ebc18+'\x20is\x20live','body':_0x5ebc18+_0x31c209(0x216),'notification_type':_0x31c209(0x1b1),'liveCallId':_0x507829['toString'](),'channelName':_0xcde6f8,'token':_0x517b15,'userImageUrl':_0x5deb09,'userId':_0x169cc9[_0x31c209(0x113)]()};sendPushNotification(_0x409421,_0x311d8c);}});});}}});});}});}),_0x153f21['on'](_0x2f144a(0x143),_0x1182a6=>{var _0x3fb8b8=_0x2f144a;console['log']('end\x20\x20live\x20call');var _0x4d2db9=_0x1182a6[_0x3fb8b8(0x183)],_0x5f259d=_0x1182a6[_0x3fb8b8(0x118)];io['in'](_0x4d2db9)[_0x3fb8b8(0x182)](_0x4d2db9);var _0x5cefab=Math[_0x3fb8b8(0x1cd)](new Date()[_0x3fb8b8(0x1c4)]()/0x3e8);db[_0x3fb8b8(0x172)]('SELECT\x20*\x20FROM\x20user_live_history\x20where\x20\x20\x20id\x20='+db['escape'](_0x4d2db9),function(_0x569a00,_0x14502b,_0x25fe06){var _0x3c0cc6=_0x3fb8b8;if(_0x14502b['length']){var _0x424daf=_0x14502b[0x0][_0x3c0cc6(0x211)],_0x4328ba=_0x5cefab-_0x424daf,_0x7b83d7='update\x20user_live_history\x20set\x20status='+STATUS_LIVE_CALL_COMPLETED+_0x3c0cc6(0x167)+db[_0x3c0cc6(0x1d7)](_0x5cefab)+_0x3c0cc6(0x1f1)+db['escape'](_0x4328ba)+'\x20where\x20id\x20=\x20'+db[_0x3c0cc6(0x1d7)](_0x4d2db9);db[_0x3c0cc6(0x172)](_0x7b83d7,function(_0xdd34e1,_0x2684c8,_0x5d8bd9){});}}),db['query'](_0x3fb8b8(0x145)+_0x5f259d,function(_0x2cc7cc,_0x115431,_0x7c830){var _0x38618e=_0x3fb8b8;_0x115431[_0x38618e(0x178)]&&_0x115431[_0x38618e(0x12f)](_0xc2fb82=>{var _0x5c50b7=_0x38618e,_0x1fafa0=_0xc2fb82[_0x5c50b7(0x175)];io['to'](_0x1fafa0)[_0x5c50b7(0x1d8)](_0x5c50b7(0x143),{'liveCallId':_0x4d2db9,'userId':_0x5f259d,'username':_0x153f21[_0x5c50b7(0x121)]});});});}),_0x153f21['on'](_0x2f144a(0x196),_0x3a7eed=>{var _0xcccb9b=_0x2f144a;console['log'](_0xcccb9b(0x120));var _0x2ac4eb=_0x3a7eed[_0xcccb9b(0x118)],_0xdac65f=_0x3a7eed[_0xcccb9b(0x183)];_0x153f21['to'](_0xdac65f)[_0xcccb9b(0x1d8)](_0xcccb9b(0x196),{'username':_0x153f21['username'],'userId':_0x153f21[_0xcccb9b(0x118)],'liveCallId':_0xdac65f}),_0x153f21[_0xcccb9b(0x146)](_0xdac65f);}),_0x153f21['on']('addUserLiveCall',_0x325ad2=>{var _0x2d56b7=_0x2f144a;console[_0x2d56b7(0x1bd)](_0x2d56b7(0x17a));var _0x121181=_0x325ad2['userId'],_0x46573d=_0x325ad2['liveCallId'];_0x153f21[_0x2d56b7(0x210)](_0x46573d),_0x153f21['to'](_0x46573d)['emit'](_0x2d56b7(0x1ab),{'username':_0x153f21[_0x2d56b7(0x121)],'userId':_0x153f21['userId'],'liveCallId':_0x46573d});}),_0x153f21['on'](_0x2f144a(0x1d0),_0x1b41ba=>{var _0x40fa65=_0x2f144a;_0x1b41ba[_0x40fa65(0x121)]=_0x153f21[_0x40fa65(0x121)],_0x1b41ba[_0x40fa65(0x1f4)]=Math[_0x40fa65(0x1cd)](new Date()[_0x40fa65(0x1c4)]()/0x3e8),_0x1b41ba[_0x40fa65(0x212)]=_0x1b41ba[_0x40fa65(0x118)];var _0x44235f=_0x1b41ba[_0x40fa65(0x183)];_0x153f21['to'](_0x44235f)[_0x40fa65(0x1d8)](_0x40fa65(0x1d0),_0x1b41ba),_0x153f21['emit'](_0x40fa65(0x1de),{'current_status':0x1,'localMessageId':_0x1b41ba['localMessageId'],'liveCallId':_0x44235f,'created_at':_0x1b41ba[_0x40fa65(0x1f4)]});}),_0x153f21['on'](_0x2f144a(0x1ea),_0x45e2f2=>{var _0x4ddde5=_0x2f144a;console[_0x4ddde5(0x1bd)]('user\x20added\x20in\x20live\x20tv');var _0x437f2a=_0x45e2f2[_0x4ddde5(0x118)],_0x35b39a=_0x45e2f2[_0x4ddde5(0x171)];_0x153f21[_0x4ddde5(0x210)](_0x35b39a),_0x153f21['to'](_0x35b39a)[_0x4ddde5(0x1d8)](_0x4ddde5(0x1ea),{'username':_0x153f21[_0x4ddde5(0x121)],'userId':_0x153f21[_0x4ddde5(0x118)],'liveTvId':_0x35b39a});const _0x57ad55=_0x35b39a['split']('_');let _0x56c532=_0x57ad55[0x1];var _0x17d1f9=Math[_0x4ddde5(0x1cd)](new Date()[_0x4ddde5(0x1c4)]()/0x3e8);db[_0x4ddde5(0x172)](_0x4ddde5(0x166)+db[_0x4ddde5(0x1d7)](_0x56c532)+_0x4ddde5(0x1ce)+db[_0x4ddde5(0x1d7)](_0x437f2a),function(_0x1794d8,_0x11fe48,_0x59daa5){var _0x3dc747=_0x4ddde5;if(_0x11fe48[0x0][_0x3dc747(0x1d9)]==0x0){var _0x17e463=_0x3dc747(0x1f6)+db[_0x3dc747(0x1d7)](_0x437f2a)+','+db[_0x3dc747(0x1d7)](_0x56c532)+','+db[_0x3dc747(0x1d7)](_0x17d1f9)+'\x20)';db[_0x3dc747(0x172)](_0x17e463,function(_0x39c6fc,_0x1e1716){if(_0x39c6fc)throw _0x39c6fc;});}});}),_0x153f21['on'](_0x2f144a(0x198),_0x4fcd4a=>{var _0x43ac8d=_0x2f144a;console[_0x43ac8d(0x1bd)](_0x43ac8d(0x11b));var _0x5c74ed=_0x4fcd4a[_0x43ac8d(0x118)],_0x29f621=_0x4fcd4a['liveTvId'];_0x153f21['to'](_0x29f621)[_0x43ac8d(0x1d8)](_0x43ac8d(0x198),{'username':_0x153f21[_0x43ac8d(0x121)],'userId':_0x153f21['userId'],'liveTvId':_0x29f621}),_0x153f21[_0x43ac8d(0x146)](_0x29f621);}),_0x153f21['on'](_0x2f144a(0x190),_0x4e684b=>{var _0x269edb=_0x2f144a;_0x4e684b[_0x269edb(0x121)]=_0x153f21['username'],_0x4e684b[_0x269edb(0x1f4)]=Math['round'](new Date()[_0x269edb(0x1c4)]()/0x3e8),_0x4e684b['created_by']=_0x4e684b[_0x269edb(0x118)];var _0x20d68e=_0x4e684b['liveTvId'];_0x153f21['to'](_0x20d68e)[_0x269edb(0x1d8)](_0x269edb(0x190),_0x4e684b),_0x153f21[_0x269edb(0x1d8)](_0x269edb(0x155),{'current_status':0x1,'localMessageId':_0x4e684b['localMessageId'],'liveTvId':_0x20d68e,'created_at':_0x4e684b['created_at']});}),_0x153f21['on'](_0x2f144a(0x156),_0x215c16=>{var _0x25b32a=_0x2f144a;console[_0x25b32a(0x1bd)]('typing');const _0x37c692='eUzWru_LqrDO28TPywKTj5:APA91bFKpKN6qy6q3IXgO8Mkxy7bf22CrUO7mqyddT_MwKXLw4YHkaGrxkU03e1suVMwSGlV4cn9ek8ziM7Y1Rkv-lz3x5ZymzbLg6FsbgAuSRvPOJGsnh9TEKWSVTQ-ZY8pOVqSHAl4',_0x47233e={'data':{'score':_0x25b32a(0x197),'time':_0x25b32a(0x18a)},'token':_0x37c692};admin[_0x25b32a(0x1eb)]()[_0x25b32a(0x163)](_0x47233e)[_0x25b32a(0x18d)](_0x4246ce=>{var _0x2d65fb=_0x25b32a;console[_0x2d65fb(0x1bd)](_0x2d65fb(0x11d),_0x4246ce);})[_0x25b32a(0x1f9)](_0x56adca=>{var _0x7ba479=_0x25b32a;console[_0x7ba479(0x1bd)]('Error\x20sending\x20message:',_0x56adca);});});});function getMessageBody(_0x41783a){var _0x1903d5=_0x34dea2,_0x13309d={},_0x6026d2='';_0x13309d[_0x1903d5(0x1bc)]='',_0x13309d[_0x1903d5(0x1a4)]='';var _0x324293=doDecrypt(_0x41783a[_0x1903d5(0x18f)]),_0x27c22d=_0x324293[_0x1903d5(0x20e)];if(_0x27c22d==0x1)_0x13309d[_0x1903d5(0x1bc)]=_0x324293[_0x1903d5(0x1ac)];else{if(_0x27c22d==0x2)_0x13309d[_0x1903d5(0x1bc)]=_0x1903d5(0x19b);else{if(_0x27c22d==0x3)_0x13309d['messageString']=_0x1903d5(0x1d6);else{if(_0x27c22d==0x4)_0x13309d[_0x1903d5(0x1bc)]=_0x1903d5(0x111);else{if(_0x27c22d==0x5)_0x13309d['messageString']=_0x1903d5(0x124);else{if(_0x27c22d==0x6)_0x13309d['messageString']='Sent\x20a\x20stiker';else{if(_0x27c22d==0x7)_0x13309d[_0x1903d5(0x1bc)]=_0x1903d5(0x188);else{if(_0x27c22d==0x8)_0x13309d[_0x1903d5(0x1bc)]=_0x1903d5(0x1c5);else{if(_0x27c22d==0xa)_0x13309d['messageString']=_0x1903d5(0x1c3);else{if(_0x27c22d==0xb)_0x13309d[_0x1903d5(0x1bc)]=_0x1903d5(0x1a5);else{if(_0x27c22d==0xc)_0x13309d[_0x1903d5(0x1bc)]=_0x1903d5(0x151);else{if(_0x27c22d==0xd)_0x13309d[_0x1903d5(0x1bc)]=_0x1903d5(0x1a8);else{if(_0x27c22d==0xe)_0x13309d[_0x1903d5(0x1bc)]=_0x1903d5(0x204);else{if(_0x27c22d==0xf)_0x13309d['messageString']='Sent\x20a\x20group';else{if(_0x27c22d==0x10)_0x13309d['messageString']='Sent\x20a\x20file';else{if(_0x27c22d==0x14)_0x13309d['messageString']=_0x1903d5(0x149);else{if(_0x27c22d==0x64)_0x13309d[_0x1903d5(0x1bc)]='Group\x20action';else _0x27c22d==0xc8?_0x13309d[_0x1903d5(0x1bc)]=_0x1903d5(0x11f):_0x13309d[_0x1903d5(0x1bc)]=_0x1903d5(0x14a);}}}}}}}}}}}}}}}}return _0x13309d;}function sendPushNotification(_0x380e5c,_0x44956b){var _0x251971=_0x34dea2;_0x44956b['sound']=_0x251971(0x12e),_0x44956b[_0x251971(0x185)]=_0x251971(0x140),_0x44956b['priority']='priority',console[_0x251971(0x1bd)](_0x44956b['body']);var _0x336c79=_0x44956b[_0x251971(0x1d2)];_0x336c79[_0x251971(0x178)]>0x64&&(_0x336c79=_0x336c79['substring'](0x0,0x64));_0x44956b['body']=_0x336c79;var _0x34bd3f={'notification':{'title':_0x44956b[_0x251971(0x1c2)],'body':_0x336c79},'data':_0x44956b,'token':_0x380e5c};console[_0x251971(0x1bd)](_0x34bd3f),admin['messaging']()[_0x251971(0x163)](_0x34bd3f)[_0x251971(0x18d)](_0x3febd8=>{var _0x3f1cef=_0x251971;console['log'](_0x3f1cef(0x11d),_0x3febd8);})[_0x251971(0x1f9)](_0x1e2281=>{var _0x229ddf=_0x251971;console['log'](_0x229ddf(0x147),_0x1e2281);});}function sendIosVoipPushNotification(_0x2aaa88,_0x5ae4d6){var _0x28c29c=_0x34dea2,_0x4ac05d={'token':{'key':config[_0x28c29c(0x19e)][_0x28c29c(0x207)],'keyId':config[_0x28c29c(0x19e)][_0x28c29c(0x1e7)],'teamId':config[_0x28c29c(0x19e)][_0x28c29c(0x195)]},'production':![]},_0x14b897=new apn[(_0x28c29c(0x1f0))](_0x4ac05d),_0x1dfe57=new apn[(_0x28c29c(0x122))]();_0x1dfe57[_0x28c29c(0x11c)]=Math[_0x28c29c(0x1c6)](Date['now']()/0x3e8)+0x3c,_0x1dfe57[_0x28c29c(0x199)]=0x1,_0x1dfe57[_0x28c29c(0x16b)]='ping.aiff',_0x1dfe57['alert']=_0x28c29c(0x1df),_0x1dfe57['payload']=_0x5ae4d6,_0x1dfe57['topic']=config[_0x28c29c(0x19e)][_0x28c29c(0x1b7)]+_0x28c29c(0x1c1),_0x14b897['send'](_0x1dfe57,_0x2aaa88)[_0x28c29c(0x18d)]((_0x33602b,_0x44c1df)=>{var _0x5713cc=_0x28c29c;console[_0x5713cc(0x1bd)](_0x44c1df),_0x33602b?console[_0x5713cc(0x1bd)](JSON[_0x5713cc(0x13b)](_0x33602b)):console[_0x5713cc(0x1bd)](JSON[_0x5713cc(0x13b)](_0x44c1df));});}async function createToken(){var _0x3d9c30=_0x34dea2;let _0x373f84='SELECT\x20*\x20FROM\x20setting';var _0x35e612=await getDbData(_0x373f84),_0x35cef4=uuidv4();const _0x5d7717=_0x35e612[0x0][_0x3d9c30(0x19a)],_0x49fb36=_0x35e612[0x0]['agora_app_certificate'],_0x3475ba=0x0,_0x4f356e='0',_0x1efbb5=RtcRole[_0x3d9c30(0x1cf)],_0x2d5781=0xe10,_0x104c45=Math[_0x3d9c30(0x1c6)](Date[_0x3d9c30(0x170)]()/0x3e8),_0xb99ceb=_0x104c45+_0x2d5781,_0x3dfbf8=RtcTokenBuilder[_0x3d9c30(0x1e6)](_0x5d7717,_0x49fb36,_0x35cef4,_0x3475ba,_0x1efbb5,_0xb99ceb);return{'channelName':_0x35cef4,'token':_0x3dfbf8};}function doEncrypt(_0x58c578){var _0x3f5308=_0x34dea2;typeof _0x58c578==_0x3f5308(0x1b6)&&(_0x58c578=JSON[_0x3f5308(0x13b)](_0x58c578));var _0x1cc0e8=config[_0x3f5308(0x217)],_0x8ff71b=crypto[_0x3f5308(0x1c7)][_0x3f5308(0x1b9)](_0x58c578,_0x1cc0e8)[_0x3f5308(0x113)]();return _0x8ff71b;}function doDecrypt(_0x3494cc){var _0x4b293d=_0x34dea2,_0x27b827=config[_0x4b293d(0x217)],_0xf66b3e=crypto[_0x4b293d(0x1c7)]['decrypt'](_0x3494cc,_0x27b827)['toString'](crypto['enc'][_0x4b293d(0x174)]);return isJsonString(_0xf66b3e)&&(_0xf66b3e=JSON[_0x4b293d(0x14c)](_0xf66b3e)),_0xf66b3e;}function isJsonString(_0x5aac63){var _0x1e132a=_0x34dea2;try{JSON[_0x1e132a(0x14c)](_0x5aac63);}catch(_0x3e9eb5){return![];}return!![];}function getDbData(_0x4e5d92){return new Promise((_0x2b0d4f,_0x1e59b6)=>{var _0x44a33f=_0x3d31;db[_0x44a33f(0x172)](_0x4e5d92,function(_0x3bbd60,_0x2ee156,_0x268ae2){if(_0x3bbd60)return _0x1e59b6(_0x3bbd60);return _0x2b0d4f(_0x2ee156);});});}server[_0x34dea2(0x1e0)](config[_0x34dea2(0x1ae)],()=>{var _0x346305=_0x34dea2;console[_0x346305(0x1bd)]('listening\x20on\x20*:'+config['port']);});function _0x3d31(_0x18622d,_0x13359b){var _0x21de29=_0x21de();return _0x3d31=function(_0x3d3126,_0x569041){_0x3d3126=_0x3d3126-0x10b;var _0x52a77b=_0x21de29[_0x3d3126];return _0x52a77b;},_0x3d31(_0x18622d,_0x13359b);}function _0x21de(){var _0x1998fa=['replyCode','round','\x20and\x20user_id\x20=','PUBLISHER','sendMessageLiveCall','SELECT\x20*\x20FROM\x20setting','body','sdjfsjhflkasjfsdfkjsdftokenA','makeRoomAdmin','\x20,\x20end_time\x20=\x20','Sent\x20a\x20video','escape','emit','total','\x20and\x20status\x20=10','callCreate','already\x20live\x20call\x20id\x20','messageId','updateMessageStatusLiveCall','New\x20call','listen','1515788vXhTAi','removeUserFromRoom','51915jYQgvs','channelName','?purchase_code=','buildTokenWithUid','keyId','/index.html','INSERT\x20INTO\x20user_live_history\x20(user_id,\x20start_time,channel_name,token)\x20VALUES\x20(','addUserLiveTv','messaging','uuid','user\x20disconnected','user_id','fromCharCode','Provider','\x20,\x20total_time\x20=\x20','channel_name','initializeApp','created_at','disconnect','INSERT\x20INTO\x20live_tv_viewer\x20(user_id,\x20live_tv_id,created_at)\x20VALUES\x20(','error','\x27\x20where\x20chat_message_id\x20=\x20','catch','SELECT\x20id,username,socket_id\x20FROM\x20user\x20where\x20id\x20IN(','Call\x20Cancel','chat_version','\x20and\x20room_id\x20=\x20','INSERT\x20INTO\x20chat_message\x20(local_message_id,room_id,\x20type,\x20message,\x20replied_on_message,\x20is_encrypted,\x20chat_version,\x20created_by,\x20created_at)\x20VALUES\x20(','goLiveConfirm','insertId','indexOf','mysql','updateChatAccessGroup','Sent\x20a\x20profile','DESKTOP-MRLV3Q3','New\x20Call','key','seeen\x20message\x20sento\x20to','\x20and\x20chat_message.is_user_notify=','\x20and\x20room_id\x20=','data','read\x20message','deleteMessage','messageType','\x27\x20where\x20id\x20IN(','join','start_time','created_by','SELECT\x20\x20user.id,user.username,user.socket_id,user.device_token\x20FROM\x20follower\x20left\x20join\x20user\x20on\x20follower.follower_id\x20=\x20user.id\x20where\x20follower.user_id\x20=','&source_type=chat&ip=','48LemZgl','\x20is\x20live\x20now','encryptionKey','address','type','200','INSERT\x20INTO\x20chat_message_user\x20(chat_message_id,\x20user_id,\x20status)\x20VALUES\x20?','replied_on_message','5854445ecLQTr','Sent\x20and\x20audio','sender_socket_id','toString','SELECT\x20*\x20FROM\x20chat_message\x20where\x20current_status\x20!=','\x27,chat_last_time_online=\x27','room','SELECT\x20id,username,socket_id,device_token_voip_ios,device_token,device_type\x20FROM\x20user\x20where\x20id\x20=','userId','update\x20chat_message_user\x20set\x20status=\x27','Error:','leave\x20live\x20Tv','expiry','Successfully\x20sent\x20message:','103','Send\x20a\x20gift','leave\x20live\x20call','username','Notification','live','Sent\x20a\x20gif\x20file','close','alert','crypto-js','14499711wZFywJ','addUser','current_status','SELECT\x20\x20chat_room.type,chat_room_user.id,chat_room_user.status,chat_room_user.user_id,user.device_token,user.socket_id\x20FROM\x20chat_room_user\x20left\x20join\x20user\x20on\x20chat_room_user.user_id\x20=\x20user.id\x20left\x20join\x20chat_room\x20on\x20chat_room_user.room_id=chat_room.id\x20\x20where\x20chat_room_user.room_id\x20=','caller_id','push','default','forEach','recieverId','SELECT\x20*\x20FROM\x20user\x20where\x20\x20\x20id\x20=','get','INSERT\x20INTO\x20chat_room_user\x20(room_id,\x20user_id,is_admin,created_at,created_by)\x20VALUES\x20(','deleteScope','542213agWOww','callIncoming','\x27,is_chat_user_online=\x27','readMessage','\x27\x20where\x20user_id\x20=\x20','call_type','stringify','updateMessageCurrentStatus','database','1445381LiKDqp','/voiptest','true','pushNotification','removeRoomAdmin','endLiveCall','a\x20user\x20connected','SELECT\x20\x20user.id,user.username,user.socket_id,user.device_token\x20FROM\x20follower\x20left\x20join\x20user\x20on\x20follower.follower_id\x20=\x20user.id\x20where\x20user.is_chat_user_online\x20=1\x20and\x20follower.user_id\x20=','leave','Error\x20sending\x20message:','SELECT\x20*\x20FROM\x20call_detail\x20where\x20\x20\x20uuid\x20=','Reacted\x20on\x20your\x20message','Sent\x20a\x20message','reciever\x20socket\x20not\x20\x20connected\x20and\x20send\x20push\x20notification','parse','chat_message_user_id','callType','password','8kjTIDk','Sent\x20a\x20story','replace','alreadyLiveAnotherCall','104','updateMessageStatusLiveTv','sendNotificationTest','host','apn','update\x20chat_message\x20set\x20current_status=\x27','chatAccessGroup','disconed\x20socet\x20inner','socket.io','createConnection','notification_type','./config.json','callCreateConfirm','end','SELECT\x20id,username,socket_id,device_type,device_token,device_token_voip_ios\x20FROM\x20user\x20where\x20id\x20=','send','express','&site_url=','SELECT\x20count(id)\x20as\x20total\x20FROM\x20live_tv_viewer\x20where\x20\x20\x20live_tv_id\x20=',',\x20end_time\x20=\x20','INSERT\x20INTO\x20call_detail\x20(uuid,local_call_id,call_type,\x20caller_id,\x20receiver_id,\x20start_time,\x20channel_name)\x20VALUES\x20(','sendMessage','SELECT\x20*\x20FROM\x20chat_room_user\x20where\x20user_id\x20=','sound','payload','userOnline','update\x20user\x20set\x20socket_id=\x27','\x20and\x20chat_message_user.status=','now','liveTvId','query','100','Utf8','socket_id','aHR0cHM6Ly9md2R0ZWNobm9sb2d5LmNvL2xpY2VuY2VfY2hlY2tlci9hcGkvd2ViL3YxL2xpY2VuY2Vz','_utf8_decode','length','decode','user\x20added\x20in\x20live\x20call','SELECT\x20*\x20FROM\x20user_live_history\x20where\x20status\x20=\x20','go\x20live\x20room\x20created','\x27\x20where\x20id\x20=','update\x20chat_room_user\x20set\x20is_admin=1\x20where\x20user_id\x20=\x20','sendFile','\x27,\x20is_user_notify=\x27','is_encrypted','socketsLeave','liveCallId','localCallId','content_available','device_token','token','Shared\x20the\x20contact','/user/','2:43','dev','http','then','createServer','message','sendMessageLiveTv','goLive','UserLogin','connection','credential','teamId','leaveUserLiveCall','8520','leaveUserLiveTv','badge','agora_api_key','Sent\x20an\x20image','update\x20chat_room\x20set\x20chat_access_group=','left\x20room','voipNotification','device_type','user','databaseURL','\x20where\x20uuid\x20=\x20','NOTUP','image','Sent\x20a\x20\x20post','SELECT\x20chat_message_user.id\x20as\x20chat_message_user_id\x20,chat_message_user.chat_message_id,\x20user.socket_id,\x20sender_user.id\x20as\x20sender_user_id,sender_user.username,\x20sender_user.socket_id\x20as\x20sender_socket_id,\x20chat_message.*\x20\x20\x20FROM\x20chat_message_user\x20left\x20join\x20chat_message\x20on\x20chat_message.id\x20=\x20chat_message_user.chat_message_id\x20LEFT\x20JOIN\x20user\x20on\x20chat_message_user.user_id\x20=\x20user.id\x20LEFT\x20JOIN\x20user\x20as\x20sender_user\x20on\x20chat_message.created_by\x20=\x20sender_user.id\x20\x20where\x20chat_message_user.user_id\x20=','localMessageId','Sent\x20a\x20drawing','update\x20chat_room_user\x20set\x20status=\x27','charAt','addUserLiveCall','text','SELECT\x20*\x20FROM\x20chat_room\x20where\x20id\x20=\x20','port','\x20and\x20user_id\x20=\x20','_keyStr','101','device_token_voip_ios','room_id','leftRoom','update\x20chat_room_user\x20set\x20is_admin=0\x20where\x20user_id\x20=\x20','object','bundleId','charCodeAt','encrypt','SELECT\x20\x20*\x20from\x20user_live_history\x20where\x20status=\x20','skjfksd.jpg','messageString','log','2666318OEpKuF','agora-access-token','typing','.voip','title','forword\x20the\x20message','getTime','Shared\x20the\x20location','floor','AES','\x20where\x20id\x20=\x20','\x27\x20\x20where\x20id\x20=\x20','update\x20user_live_history\x20set\x20status=','local_message_id'];_0x21de=function(){return _0x1998fa;};return _0x21de();}